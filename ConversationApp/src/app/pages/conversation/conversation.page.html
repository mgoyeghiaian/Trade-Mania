<!DOCTYPE html>

<ion-content>
  <div class="MainBody">
    <div class="Navbar">
      <ion-buttons slot="start">
        <ion-back-button
          defaultHref="/"
          icon="chevron-back-outline"
        ></ion-back-button>
      </ion-buttons>
      <h2>{{ userData.name }}</h2>
      <ion-avatar>
        <img [src]="userData.imageUrl" />
      </ion-avatar>
    </div>
    <div class="chat-section">
      <div
        *ngFor="let message of messages"
        class="message-wrapper"
        [ngClass]="{'message-sent': message.mine, 'message-received': !message.mine}"
      >
        <div class="message-bubble">
          <div class="message-text">{{ message.text }}</div>
        </div>
        <div class="message-timestamp">{{ message.timestamp }}</div>
      </div>
    </div>
  </div>
  <div class="input-section">
    <ion-textarea
      rows="1"
      autoGrow="true"
      placeholder="Type your message here"
      [(ngModel)]="messageText"
    >
    </ion-textarea>
    <ion-button
      slot="end"
      (click)="messageText ? sendMessage() : toggleRecording()"
    >
      <ion-icon
        [name]="isRecording ? 'stop-circle' : (messageText ? 'send' : 'mic-outline')"
      ></ion-icon>
    </ion-button>
    <div *ngIf="isRecording" class="recording-indicator">Recording...</div>
  </div>
</ion-content>
